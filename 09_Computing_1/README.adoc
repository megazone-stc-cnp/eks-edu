ifdef::env-github[]
:tip-caption: :bulb: Tip
:note-caption: :information_source: Note
:important-caption: :heavy_exclamation_mark: Important
:caution-caption: :fire: Caution
:warning-caption: :warning: Warning
endif::[]
:icons: font
:sectnums:
// :toc: left
// :toclevels: 4
= 9. 컴퓨팅 관리 1

== 학습 목표
* EKS 노드 그룹의 개념과 유형을 이해합니다.
* 관리형과 비관리형 노드 그룹의 차이점을 설명할 수 있습니다.
* 노드 관리를 위한 모범 사례를 파악합니다.

== 사전 조건

1. link:../00_Setup/[0. 교육 환경 구성하기]를 이용해 기본 실습 환경 생성이 되어 있어야 합니다.
2. link:../00_Setup/[0. 교육 환경 구성하기]를 이용해 생성된 `code-server`에 접속한 상태여야 합니다.
3. link:../03_Default_Environment[3. 기본 환경 생성]을 참고하여 아래와 같이 vpc와 eks를 배포해야 합니다.
+
[source,shell]
----
cd ~/environment/eks-edu/03_Default_Environment/01_create_vpc
sh 01_default_vpc.sh

cd ../02_create_eks
sh 01-1_make_eksctl_cluster_only_template.sh <1>
sh 02_eksctl_install.sh
----
<1> `01-1_make_eksctl_cluster_only_template.sh` 사용 필수!!

== Kubernetes 노드 구성 요소
// [%header%footer%autowidth]
[cols="1,3"]
|===
|구성 요소 |설명

|*kubelet*
a|
* 각 노드에서 실행되는 *노드 에이전트*
* 컨테이너가 제공된 Pod 스펙(PodSpec)에 따라 정상 실행되도록 관리

|*kube-proxy*
a|
* 각 노드에서 실행되는 네트워크 프록시
* 노드의 네트워크 규칙을 관리
* 내/외부 네트워크 세션에 대한 포워딩을 처리

|*Container Runtime*
a|
* 컨테이너 실행을 담당하는 소프트웨어
* *containerd*, CRI-O, Docker 등이 대표적 footnote:[`Docker` 는 Kubernetes 1.24 부터 https://kubernetes.io/blog/2022/02/17/dockershim-faq/[지원 중단됨]]
* 컨테이너 이미지를 다운로드하고 실행하는 역할 수행
|===

== AWS EKS 노드 관리

=== 노드 그룹 개요
* Amazon EC2 인스턴스를 논리적으로 구분한 개념
* '관리형 노드 그룹'과 '자체 관리형 노드', 'Fargate' 로 구분됨
* 노드 그룹을 통해 워크로드에 맞는 컴퓨팅 리소스 구성 가능

=== 관리형 노드 그룹 (Managed Node Groups)
* AWS가 노드의 프로비저닝과 수명 주기를 관리
* Auto Scaling 그룹(ASG) 기반으로 동작
* 노드 업데이트 및 패치 자동화 지원
* 손쉬운 버전 업그레이드 기능 제공

=== https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/worker.html[자체 관리형 노드 (Self-managed nodes)]
* 사용자가 직접 노드를 관리
* 특별한 요구사항이 있는 워크로드에 적합
** GPU 기반 머신러닝/딥러닝 워크로드
** 특정 커널 버전이나 드라이버가 필요한 워크로드
** 특수한 네트워킹 구성이 필요한 워크로드
** 커스텀 AMI가 필요한 워크로드
** 규제 준수를 위해 특별한 보안 설정이 필요한 워크로드
* 더 많은 사용자 정의 옵션 사용 가능
** 보안 그룹 구성
** IAM 역할 및 정책 적용
** kubelet 구성
** 시작 템플릿 사용
** 스토리지 구성
** 네트워킹 설정(CNI 플러그인)
** 노드 레이블 및 테인트 설정

=== AWS Fargate
* 서버리스 컴퓨팅 엔진으로 컨테이너 실행
* 인프라 관리가 필요 없음
* Pod 단위로 리소스 할당 및 과금
* 주요 특징:
** 자동 확장/축소
** Pod 격리
** 보안 패치 자동화
** 사용한 만큼만 지불
* 적합한 워크로드:
** 가변적인 워크로드
** 마이크로서비스
** 배치 처리
** 개발/테스트 환경
=== 노드 관리 모범 사례
* 적절한 인스턴스 유형 선택
* 가용성 영역 분산 배치
* 리소스 모니터링 설정
* 정기적인 업데이트 계획 수립

[NOTE]
====
노드 그룹 선택 시 워크로드 특성, 관리 부담, 비용을 종합적으로 고려해야 합니다.
====
ifdef::env
ifdef::env-
ifdef::env-github
